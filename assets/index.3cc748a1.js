import{r as p,c as P,u as B,a as U,o as z,w as D,b as H,s as j,n as K,d as k,e as g,f as b,g as q,h as M,i as u,j as _,k as A,l as F,m as V,p as I,v as N,q as y,t as E,x as O,y as x,z as G,A as J,B as Q,C as Y,F as X,D as Z,E as ee,G as te,H as re,I as oe,J as ne,K as se,L as ie,M as ae,N as le,O as ue,P as ce,Q as de,R as fe,S as me}from"./vendor.870a6cb0.js";const pe=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))t(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&t(s)}).observe(document,{childList:!0,subtree:!0});function e(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerpolicy&&(a.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?a.credentials="include":n.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function t(n){if(n.ep)return;n.ep=!0;const a=e(n);fetch(n.href,a)}};pe();const ve="modulepreload",$={},ge="/",f=function(r,e){return!e||e.length===0?r():Promise.all(e.map(t=>{if(t=`${ge}${t}`,t in $)return;$[t]=!0;const n=t.endsWith(".css"),a=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${a}`))return;const s=document.createElement("link");if(s.rel=n?"stylesheet":ve,n||(s.as="script",s.crossOrigin=""),s.href=t,document.head.appendChild(s),n)return new Promise((c,v)=>{s.addEventListener("load",c),s.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${t}`)))})})).then(()=>r())},h=p(),C=p(),Ie=async()=>{h.value=await window.showDirectoryPicker(),C.value=h.value},he=(o,r)=>o.startsWith("image/")?"image":o.startsWith("audio/")?"audio":o==="application/pdf"?"pdf":o.startsWith("video/")?"video":["text/markdown","text/x-markdown"].includes(o)||r.endsWith(".md")?"markdown":o.startsWith("text/")||o.endsWith("/json")||r.endsWith(".vue")?"text":"unknown",Ne=(o,r)=>{const e=j(r,{lower:!0}),t=o.find(n=>n.type==="image"&&n.file.name.toLowerCase().replace(/\.[^/.]+$/,"")===e);if(t)return t},Oe=o=>o.find(r=>r.type==="image"),R=p([]),_e=P(()=>R.value.filter(o=>o.isFile)),L=p(!1),we=async o=>{const r=[];if(o){for await(const[,e]of o.entries())if(!(e.name.startsWith(".")||["$RECYCLE.BIN","System Volume Information"].includes(e.name)))if(e.kind==="file"){const t=await e.getFile();if(!t.type&&!e.name.endsWith(".md")&&!e.name.endsWith(".vue"))continue;r.push({handle:e,file:t,type:he(t.type,e.name),mime:t.type,isActive:!1,isDir:!1,isFile:!0})}else r.push({handle:e,file:!1,type:"dir",isActive:!1,isDir:!0,isFile:!1})}return r.sort((e,t)=>e.isDir===t.isDir?e.handle.name.localeCompare(t.handle.name):e.isDir?-1:1),r},d=P(()=>R.value.find(o=>o.isActive)),m=o=>{const r=_e.value,e=r.findIndex(({isActive:t})=>t);e<0||(r[e].isActive=!1,e+o<0?r[r.length-e+o].isActive=!0:r.length>e+o?r[e+o].isActive=!0:r.length>o&&(r[o-1].isActive=!0))},$e=()=>{const o=B(),r=U();z(()=>{h.value||r.replace({name:"Home"})}),D(()=>h.value,()=>r.push({name:"Files"})),D(()=>C.value,async e=>{if(!e)return;L.value=!0;const t=await we(e);R.value=[],await K(),R.value=t,L.value=!1}),D(()=>o.params.path,async e=>{if(typeof e!="string"||!h.value)return;const t=decodeURIComponent(e).split("/").filter(Boolean);let n=h.value;for(const a of t)n=await n.getDirectoryHandle(decodeURIComponent(a));C.value=n}),H(()=>{L.value=!0})},ye=k({setup(o){const r={audio:g(()=>f(()=>import("./FileOverlayAudio.0ac9d0da.js"),["assets/FileOverlayAudio.0ac9d0da.js","assets/vendor.870a6cb0.js"])),image:g(()=>f(()=>import("./FileOverlayImage.4a5e2053.js"),["assets/FileOverlayImage.4a5e2053.js","assets/vendor.870a6cb0.js"])),markdown:g(()=>f(()=>import("./FileOverlayMarkdown.9b5a6db0.js"),["assets/FileOverlayMarkdown.9b5a6db0.js","assets/vendor.870a6cb0.js","assets/marked.esm.fa6ab4f4.js"])),pdf:g(()=>f(()=>import("./FileOverlayPdf.f75cd44e.js"),["assets/FileOverlayPdf.f75cd44e.js","assets/vendor.870a6cb0.js"])),text:g(()=>f(()=>import("./FileOverlayText.74bd5c04.js"),["assets/FileOverlayText.74bd5c04.js","assets/FileOverlayText.d4703037.css","assets/vendor.870a6cb0.js"])),unknown:g(()=>f(()=>import("./FileOverlayUnknown.2822e775.js"),[])),video:g(()=>f(()=>import("./FileOverlayVideo.4a01cd12.js"),["assets/FileOverlayVideo.4a01cd12.js","assets/vendor.870a6cb0.js"]))},e=()=>{!d.value||(d.value.isActive=!1)},t=p(!1),n=p(!1);let a=0;const s=()=>{n.value=!1},c=()=>{n.value=!0,clearTimeout(a),a=setTimeout(s,1e3)};b(["w","ArrowUp"],i=>{!d.value||(i.preventDefault(),m(-5))}),b(["d","ArrowRight"],i=>{!d.value||(i.preventDefault(),m(1))}),b(["s","ArrowDown"],i=>{!d.value||(i.preventDefault(),m(5))}),b(["a","ArrowLeft"],i=>{!d.value||(i.preventDefault(),m(-1))});const v=i=>{!d.value||(i.button===4&&(i.preventDefault(),m(1)),i.button===3&&(i.preventDefault(),m(-1)))};return document.addEventListener("mouseup",v),q(()=>{document.removeEventListener("mouseup",v)}),(i,l)=>{var S;const W=M("app-icon");return(S=u(d))!=null&&S.isFile?(_(),A("div",{key:0,class:"fixed inset-0 grid place-items-center bg-black/50 backdrop-blur-lg",onClick:e,onMousemove:c},[(_(),F(V(r[u(d).type]))),I(y("button",{class:"absolute right-0 top-1/2 -translate-y-1/2 overflow-hidden rounded-l-full bg-black/10 text-white/75 backdrop-blur-sm hover:bg-black/20",onClick:l[0]||(l[0]=O(w=>u(m)(1),["stop"])),onMouseenter:l[1]||(l[1]=w=>t.value=!0),onMouseleave:l[2]||(l[2]=w=>t.value=!1)},[E(W,{name:"NavArrowRight",size:"64",class:"drop-shadow"})],544),[[N,n.value||t.value]]),I(y("button",{class:"absolute left-0 top-1/2 -translate-y-1/2 overflow-hidden rounded-r-full bg-black/10 text-white/75 backdrop-blur-sm hover:bg-black/20",onClick:l[3]||(l[3]=O(w=>u(m)(-1),["stop"])),onMouseenter:l[4]||(l[4]=w=>t.value=!0),onMouseleave:l[5]||(l[5]=w=>t.value=!1)},[E(W,{name:"NavArrowLeft",size:"64",class:"drop-shadow"})],544),[[N,n.value||t.value]])],32)):x("",!0)}}});function Ee(o={}){const{immediate:r=!1,onNeedRefresh:e,onOfflineReady:t,onRegistered:n,onRegisterError:a}=o;let s,c;const v=async(i=!0)=>{i&&(s==null||s.addEventListener("controlling",l=>{l.isUpdate&&window.location.reload()})),c&&c.waiting&&await J(c.waiting,{type:"SKIP_WAITING"})};if("serviceWorker"in navigator){s=new G("/sw.js",{scope:"/",type:"classic"}),s.addEventListener("activated",i=>{i.isUpdate||t==null||t()});{const i=()=>{e==null||e()};s.addEventListener("waiting",i),s.addEventListener("externalwaiting",i)}s.register({immediate:r}).then(i=>{c=i,n==null||n(i)}).catch(i=>{a==null||a(i)})}return v}function be(o={}){const{immediate:r=!0,onNeedRefresh:e,onOfflineReady:t,onRegistered:n,onRegisterError:a}=o,s=p(!1),c=p(!1);return{updateServiceWorker:Ee({immediate:r,onNeedRefresh(){s.value=!0,e==null||e()},onOfflineReady(){c.value=!0,t==null||t()},onRegistered:n,onRegisterError:a}),offlineReady:c,needRefresh:s}}const T="Peekaboo",Te="1.0.0",Ae={key:0,class:"fixed right-2 bottom-2 max-w-sm space-y-3 rounded-lg border border-gray-700 bg-gray-800 p-4 text-gray-400 shadow-lg",role:"alert"},Re=["textContent"],ke={class:"flex gap-2"},De=k({setup(o){const{offlineReady:r,needRefresh:e,updateServiceWorker:t}=be(),n=async()=>{r.value=!1,e.value=!1};return(a,s)=>u(r)||u(e)?(_(),A("div",Ae,[y("div",{class:"leading-tight",textContent:Q(u(r)?`${u(T)} is now offline available.`:`A new version of ${u(T)} is available.`)},null,8,Re),y("div",ke,[u(e)?(_(),A("button",{key:0,class:"rounded bg-teal-700 px-2 py-1 font-medium text-teal-200 shadow",onClick:s[0]||(s[0]=c=>u(t)())}," Reload ")):x("",!0),y("button",{class:Y({"rounded px-2 py-1 font-medium text-teal-200":!0,"bg-teal-700 shadow":!u(e)}),onClick:n}," Close ",2)])])):x("",!0)}});const Le=k({setup(o){return(r,e)=>{const t=M("router-view");return _(),A(X,null,[E(t),E(ye),E(De)],64)}}});var xe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",AirplaneRotation:Z,EmptyPage:ee,Folder:te,GlassEmpty:re,JournalPage:oe,MediaImage:ne,MediaVideo:se,Music1:ie,NavArrowRight:ae,NavArrowLeft:le,Page:ue,TextAlt:ce});const Ce=k({props:{name:null,size:{default:24}},setup(o){const r=o,e=P(()=>xe[r.name]);return(t,n)=>(_(),F(V(u(e)),{height:o.size,width:o.size},null,8,["height","width"]))}}),Pe=[{name:"Home",path:"/",component:()=>f(()=>import("./Home.ae25fdba.js"),["assets/Home.ae25fdba.js","assets/vendor.870a6cb0.js"])},{name:"Files",path:"/files/:path?",component:()=>f(()=>import("./Dir.977eece1.js"),["assets/Dir.977eece1.js","assets/marked.esm.fa6ab4f4.js","assets/vendor.870a6cb0.js"])}],We=de({history:fe("/"),routes:Pe,scrollBehavior(o,r,e){return e?(document.body.style.minHeight=e.top+window.innerHeight+"px",e):(document.body.style.removeProperty("min-height"),{top:0})}});me(Le).component("AppIcon",Ce).use(We).mount("#app");export{we as a,Oe as b,C as c,T as d,L as e,R as f,Ne as g,d as h,Ie as s,$e as u,Te as v};
